KERNELGEN

regcount = 9, size = 432
Loaded '__kernelgen_sincos__loop_12' at: 0x2258fc0
Launching kernel __kernelgen_sincos__loop_12
    blockDim = { 32, 16, 2 }
    gridDim = { 16, 32, 32 }
__kernelgen_sincos__loop_12 time = 0.00407534 sec
only the kernel execution time = 0.00388784 sec

PGI ACCELERATOR

Accelerator Kernel Timing data
/home/marcusmae/Programming/kernelgen/tests/perf/sincos/malloc/pgi/../sincos.f90
  sincos
    12: region entered 1 time
        time(us): total=2362577 init=2268435 region=94142
                  kernels=3575 data=86839
        w/o init: total=94142 max=94142 min=94142 avg=94142
        15: kernel launched 1 times
            grid: [128x16]  block: [16x4x4]
            time(us): total=3575 max=3575 min=3575 avg=3575

[marcusmae@noisy malloc]$ make
cd pgi && make
make[1]: Entering directory `/home/marcusmae/Programming/kernelgen/tests/perf/sincos/malloc/pgi'
pgfortran -fast -Mnomain -Minfo=accel -ta=nvidia:4.1,time -Mcuda=keepgpu,keepbin,keepptx -c ../sincos.f90 -o sincos.o
NOTE: your trial license will expire in 11 days, 18.4 hours.
NOTE: your trial license will expire in 11 days, 18.4 hours.
sincos:
     12, Generating copyin(y(:nx,:ny,:nz))
         Generating copyin(x(:nx,:ny,:nz))
         Generating copyout(xy1(:nx,:ny,:nz))
     13, Loop is parallelizable
     14, Loop is parallelizable
     15, Loop is parallelizable
         Accelerator kernel generated
         13, !$acc do parallel, vector(4) ! blockidx%y threadidx%z
         14, !$acc do parallel, vector(4) ! blockidx%x threadidx%y
         15, !$acc do vector(16) ! threadidx%x
pgcc -c ../main.c -o main.o
NOTE: your trial license will expire in 11 days, 18.4 hours.
pgfortran -fast -Mnomain -Minfo=accel -ta=nvidia:4.1,time -Mcuda=keepgpu,keepbin,keepptx sincos.o main.o -o sincos
make[1]: Leaving directory `/home/marcusmae/Programming/kernelgen/tests/perf/sincos/malloc/pgi'
cd kernelgen && make
make[1]: Entering directory `/home/marcusmae/Programming/kernelgen/tests/perf/sincos/malloc/kernelgen'
kernelgen-gfortran -c ../sincos.f90 -o sincos.o
KernelGen : NumExtractedLoops = 1 CurrentFunction:"sincos_" CurrentHeader:"21.orig.header"
KernelGen : NumExtractedLoops = 2 CurrentFunction:"sincos_" CurrentHeader:"12.orig.header"
KernelGen : NumExtractedLoops = 3 CurrentFunction:"sincos_" CurrentHeader:"3.orig.header"
kernelgen-gcc -std=c99 -c ../main.c -o main.o
KernelGen : NumExtractedLoops = 1 CurrentFunction:"main" CurrentHeader:"6.orig.header"
kernelgen-gfortran sincos.o main.o -o sincos
make[1]: Leaving directory `/home/marcusmae/Programming/kernelgen/tests/perf/sincos/malloc/kernelgen'

[marcusmae@noisy malloc]$ kernelgen_verbose=1 kernelgen_runmode=1 kernelgen_szheap=$((1024*1024*1024)) kernelgen/sincos 512 512 64
Using KernelGen/CUDA

Building kernels index ...
__kernelgen_sincos__loop_21
__kernelgen_sincos__loop_12
__kernelgen_sincos__loop_3
__kernelgen_main_loop_6
__kernelgen_main

Launcher invokes kernel __kernelgen_main_loop_6
Launcher invokes kernel __kernelgen_sincos__loop_3
Launcher invokes kernel __kernelgen_sincos__loop_12
Launcher invokes kernel __kernelgen_sincos__loop_21
Warning Line 40: 		!RegCount 0
	Evaluation of constant returned zero. Consider using RZ if value of zero is intended.
LEPC = 0xc500
nvopencc -D__CUDA_DEVICE_FUNC__ -U_FORTIFY_SOURCE -I/opt/cuda/include -include device_functions.h -D__CUDA_ARCH__=200 -DCUDA_DOUBLE_MATH_FUNCTIONS -D__CUDACC__ -D__CUDA_PREC_DIV -D__CUDA_PREC_SQRT -I/opt/kernelgen/include -include kernelgen_runtime.h -x c -TARG:compute_20 -m64 -OPT:ftz=0 -CG:ftz=0 -CG:prec_div=1 -CG:prec_sqrt=1 /tmp/7idSDs -o /tmp/3cQROB
nvopencc WARNING: /tmp/3cQROB /tmp/3cQROB will overwrite a file that has a source-file suffix
ptxas -v -arch=sm_20 -m64 /tmp/3cQROB -o /tmp/0pW9PM
ptxas info    : Compiling entry function 'kernelgen_monitor' for 'sm_20'
ptxas info    : Function properties for kernelgen_monitor
    0 bytes stack frame, 0 bytes spill stores, 0 bytes spill loads
ptxas info    : Used 5 registers, 40 bytes cmem[0]
regcount = 5, size = 104
Loaded 'kernelgen_monitor' at: 0x28a0b30
Kernel function call __kernelgen_main
No prebuilt kernel, compiling...

<------------------ __kernelgen_main: compile started --------------------->
 7 polly-detect     - Number of bad regions for Scop: Expression not affine
 3 polly-detect     - Number of bad regions for Scop: Others
10 polly-detect     - Number of bad regions for Scop: Region not simple
<------------------ __kernelgen_main: compile completed ------------------->

hostcall: printf
hostcall: atoi
hostcall: atoi
hostcall: atoi
replacement: malloc -> kernelgen_malloc
replacement: malloc -> kernelgen_malloc
replacement: malloc -> kernelgen_malloc
replacement: malloc -> kernelgen_malloc
KernelGen native: kernelgen_launch
hostcall: rand
hostcall: rand
KernelGen native: kernelgen_launch
CUDA native: sinf
CUDA native: cosf
KernelGen native: kernelgen_launch
CUDA native: sinf
CUDA native: cosf
hostcall: _gfortran_st_write
hostcall: _gfortran_transfer_character_write
KernelGen native: kernelgen_launch
hostcall: _gfortran_transfer_real_write
hostcall: _gfortran_st_write_done
replacement: free -> kernelgen_free
replacement: free -> kernelgen_free
replacement: free -> kernelgen_free
replacement: free -> kernelgen_free
KernelGen native: kernelgen_finish
nvopencc -D__CUDA_DEVICE_FUNC__ -U_FORTIFY_SOURCE -I/opt/cuda/include -include device_functions.h -D__CUDA_ARCH__=200 -DCUDA_DOUBLE_MATH_FUNCTIONS -D__CUDACC__ -D__CUDA_PREC_DIV -D__CUDA_PREC_SQRT -I/opt/kernelgen/include -include kernelgen_runtime.h -x c -TARG:compute_20 -m64 -OPT:ftz=0 -CG:ftz=0 -CG:prec_div=1 -CG:prec_sqrt=1 -CG:auto_as_static=0 /tmp/0NMcHY -o /tmp/wwOhya
nvopencc WARNING: /tmp/wwOhya /tmp/wwOhya will overwrite a file that has a source-file suffix
ptxas -v -arch=sm_20 -m64 /tmp/wwOhya -o /tmp/Uh2JFq
ptxas info    : Compiling entry function '__kernelgen_main' for 'sm_20'
ptxas info    : Function properties for __kernelgen_main
    0 bytes stack frame, 0 bytes spill stores, 0 bytes spill loads
ptxas info    : Used 46 registers, 40 bytes cmem[0], 128 bytes cmem[14]
Loaded '__kernelgen_main' at: 0x2544e60
atoi time = 0.96919 sec
atoi time = 0.969406 sec
atoi time = 0.968115 sec
Kernel function call __kernelgen_main_loop_6
__kernelgen_main_loop_6 @ 14435232031631171118201217106203161187206124
No prebuilt kernel, compiling...

<------------------ __kernelgen_main_loop_6: compile started --------------------->

    FAIL: No Valid Scops detected in kernel!!!

1 polly-detect - Number of bad regions for Scop: Expression not affine
<------------------ __kernelgen_main_loop_6: compile completed ------------------->


<------------------ __kernelgen_main_loop_6: compile started --------------------->

    FAIL: No Valid Scops detected in kernel!!!

1 polly-detect - Number of bad regions for Scop: Expression not affine
1 polly-detect - Number of bad regions for Scop: Region not simple
<------------------ __kernelgen_main_loop_6: compile completed ------------------->

ld -shared -o /tmp/7DjOSg /tmp/oMmgMQ
Loaded '__kernelgen_main_loop_6' at: 0x7f4857884270
__kernelgen_main_loop_6 time = 1.71853 sec
Kernel function call __kernelgen_sincos__loop_3
__kernelgen_sincos__loop_3 @ 44125166225342471559221555513320296193219
No prebuilt kernel, compiling...

<------------------ __kernelgen_sincos__loop_3: compile started --------------------->

<------------------------------ Scop: start --------------------------------->
<------------------- Cloog AST of Scop ------------------->
for (c2=0;c2<=63;c2++) {
  for (c4=0;c4<=511;c4++) {
    for (c6=0;c6<=511;c6++) {
      Stmt__5_cloned_(c2,c4,c6);
    }
  }
}
<--------------------------------------------------------->

        Stmt__5_cloned_ domain := 
            { Stmt__5_cloned_[i0, i1, i2] : i0 >= 0 and i0 <= 63 and i1 >= 0 and i1 <= 511 and i2 >= 0 and i2 <= 511 }

            ReadAccess := 
                { Stmt__5_cloned_[i0, i1, i2] -> MemRef_nttoptr (i64 8595607552 to [0 x float]*)[262144i0 + 512i1 + i2] };
                Base address  =  8595607552   SizeOfElement = 4
                    Minimum offset = 0  Maximum offset = 16777215
                    Byte min offset = 0  Byte max offset = 67108860
                Total access range = [8595607552, 8662716412]

            ReadAccess := 
                { Stmt__5_cloned_[i0, i1, i2] -> MemRef_nttoptr (i64 8662720512 to [0 x float]*)[262144i0 + 512i1 + i2] };
                Base address  =  8662720512   SizeOfElement = 4
                    Minimum offset = 0  Maximum offset = 16777215
                    Byte min offset = 0  Byte max offset = 67108860
                Total access range = [8662720512, 8729829372]

            WriteAccess := 
                { Stmt__5_cloned_[i0, i1, i2] -> MemRef_nttoptr (i64 8729833472 to [0 x float]*)[262144i0 + 512i1 + i2] };
                Base address  =  8729833472   SizeOfElement = 4
                    Minimum offset = 0  Maximum offset = 16777215
                    Byte min offset = 0  Byte max offset = 67108860
                Total access range = [8729833472, 8796942332]

        Testing pair : [8595607552, 8662716412] vs [8729833472, 8796942332] .... OK!
        Testing pair : [8662720512, 8729829372] vs [8729833472, 8796942332] .... OK!

    Number of good nested parallel loops: 3
    Average size of loops: 64 512 512

<------------------------------ Scop: end ----------------------------------->
1 polly-detect - Number of regions that a valid part of Scop
2 runtime-AA   - Number of readings
1 runtime-AA   - Number of writings
1 runtime-AA   - RESULT: Number of good scops (with no memory aliasing)
<------------------ __kernelgen_sincos__loop_3: compile completed ------------------->

KernelGen native: kernelgen_threadIdx_x
KernelGen native: kernelgen_blockIdx_x
KernelGen native: kernelgen_threadIdx_y
KernelGen native: kernelgen_blockIdx_y
KernelGen native: kernelgen_threadIdx_z
KernelGen native: kernelgen_blockIdx_z
CUDA native: sinf
CUDA native: cosf
nvopencc -D__CUDA_DEVICE_FUNC__ -U_FORTIFY_SOURCE -I/opt/cuda/include -include device_functions.h -D__CUDA_ARCH__=200 -DCUDA_DOUBLE_MATH_FUNCTIONS -D__CUDACC__ -D__CUDA_PREC_DIV -D__CUDA_PREC_SQRT -I/opt/kernelgen/include -include kernelgen_runtime.h -x c -TARG:compute_20 -m64 -OPT:ftz=0 -CG:ftz=0 -CG:prec_div=1 -CG:prec_sqrt=1 /tmp/Na0wkM -o /tmp/XaAhMh
nvopencc WARNING: /tmp/XaAhMh /tmp/XaAhMh will overwrite a file that has a source-file suffix
ptxas -v -arch=sm_20 -m64 /tmp/XaAhMh -o /tmp/rjnhwN
ptxas info    : Compiling entry function '__kernelgen_sincos__loop_3' for 'sm_20'
ptxas info    : Function properties for __kernelgen_sincos__loop_3
    0 bytes stack frame, 0 bytes spill stores, 0 bytes spill loads
ptxas info    : Used 9 registers, 40 bytes cmem[0], 24 bytes cmem[14]
regcount = 9, size = 432
Loaded '__kernelgen_sincos__loop_3' at: 0x2687ae0
Launching kernel __kernelgen_sincos__loop_3
    blockDim = { 32, 16, 2 }
    gridDim = { 16, 32, 32 }
__kernelgen_sincos__loop_3 time = 0.00407996 sec
only the kernel execution time = 0.00390173 sec
Kernel function call __kernelgen_sincos__loop_12
__kernelgen_sincos__loop_12 @ 2921582025513126571952142131252069626
No prebuilt kernel, compiling...

<------------------ __kernelgen_sincos__loop_12: compile started --------------------->

<------------------------------ Scop: start --------------------------------->
<------------------- Cloog AST of Scop ------------------->
for (c2=0;c2<=63;c2++) {
  for (c4=0;c4<=511;c4++) {
    for (c6=0;c6<=511;c6++) {
      Stmt__14_cloned_(c2,c4,c6);
    }
  }
}
<--------------------------------------------------------->

        Stmt__14_cloned_ domain := 
            { Stmt__14_cloned_[i0, i1, i2] : i0 >= 0 and i0 <= 63 and i1 >= 0 and i1 <= 511 and i2 >= 0 and i2 <= 511 }

            ReadAccess := 
                { Stmt__14_cloned_[i0, i1, i2] -> MemRef_nttoptr (i64 8595607552 to [0 x float]*)[262144i0 + 512i1 + i2] };
                Base address  =  8595607552   SizeOfElement = 4
                    Minimum offset = 0  Maximum offset = 16777215
                    Byte min offset = 0  Byte max offset = 67108860
                Total access range = [8595607552, 8662716412]

            ReadAccess := 
                { Stmt__14_cloned_[i0, i1, i2] -> MemRef_nttoptr (i64 8662720512 to [0 x float]*)[262144i0 + 512i1 + i2] };
                Base address  =  8662720512   SizeOfElement = 4
                    Minimum offset = 0  Maximum offset = 16777215
                    Byte min offset = 0  Byte max offset = 67108860
                Total access range = [8662720512, 8729829372]

            WriteAccess := 
                { Stmt__14_cloned_[i0, i1, i2] -> MemRef_nttoptr (i64 8796946432 to [0 x float]*)[262144i0 + 512i1 + i2] };
                Base address  =  8796946432   SizeOfElement = 4
                    Minimum offset = 0  Maximum offset = 16777215
                    Byte min offset = 0  Byte max offset = 67108860
                Total access range = [8796946432, 8864055292]

        Testing pair : [8595607552, 8662716412] vs [8796946432, 8864055292] .... OK!
        Testing pair : [8662720512, 8729829372] vs [8796946432, 8864055292] .... OK!

    Number of good nested parallel loops: 3
    Average size of loops: 64 512 512

<------------------------------ Scop: end ----------------------------------->
1 polly-detect - Number of regions that a valid part of Scop
2 runtime-AA   - Number of readings
1 runtime-AA   - Number of writings
1 runtime-AA   - RESULT: Number of good scops (with no memory aliasing)
<------------------ __kernelgen_sincos__loop_12: compile completed ------------------->

KernelGen native: kernelgen_threadIdx_x
KernelGen native: kernelgen_blockIdx_x
KernelGen native: kernelgen_threadIdx_y
KernelGen native: kernelgen_blockIdx_y
KernelGen native: kernelgen_threadIdx_z
KernelGen native: kernelgen_blockIdx_z
CUDA native: sinf
CUDA native: cosf
nvopencc -D__CUDA_DEVICE_FUNC__ -U_FORTIFY_SOURCE -I/opt/cuda/include -include device_functions.h -D__CUDA_ARCH__=200 -DCUDA_DOUBLE_MATH_FUNCTIONS -D__CUDACC__ -D__CUDA_PREC_DIV -D__CUDA_PREC_SQRT -I/opt/kernelgen/include -include kernelgen_runtime.h -x c -TARG:compute_20 -m64 -OPT:ftz=0 -CG:ftz=0 -CG:prec_div=1 -CG:prec_sqrt=1 /tmp/RGAcBj -o /tmp/S2d9FP
nvopencc WARNING: /tmp/S2d9FP /tmp/S2d9FP will overwrite a file that has a source-file suffix
ptxas -v -arch=sm_20 -m64 /tmp/S2d9FP -o /tmp/9HbS2l
ptxas info    : Compiling entry function '__kernelgen_sincos__loop_12' for 'sm_20'
ptxas info    : Function properties for __kernelgen_sincos__loop_12
    0 bytes stack frame, 0 bytes spill stores, 0 bytes spill loads
ptxas info    : Used 9 registers, 40 bytes cmem[0], 24 bytes cmem[14]
regcount = 9, size = 432
Loaded '__kernelgen_sincos__loop_12' at: 0x25b0d50
Launching kernel __kernelgen_sincos__loop_12
    blockDim = { 32, 16, 2 }
    gridDim = { 16, 32, 32 }
__kernelgen_sincos__loop_12 time = 0.00412179 sec
only the kernel execution time = 0.00389379 sec
_gfortran_st_write time = 0.00019635 sec
_gfortran_transfer_character_write time = 0.000264588 sec
Kernel function call __kernelgen_sincos__loop_21
__kernelgen_sincos__loop_21 @ 262017321912110959125220316733321915117
No prebuilt kernel, compiling...

<------------------ __kernelgen_sincos__loop_21: compile started --------------------->

    FAIL: No Valid Scops detected in kernel!!!

3 polly-detect - Number of bad regions for Scop: Expression not affine
3 polly-detect - Number of bad regions for Scop: Region not simple
<------------------ __kernelgen_sincos__loop_21: compile completed ------------------->

nvopencc -D__CUDA_DEVICE_FUNC__ -U_FORTIFY_SOURCE -I/opt/cuda/include -include device_functions.h -D__CUDA_ARCH__=200 -DCUDA_DOUBLE_MATH_FUNCTIONS -D__CUDACC__ -D__CUDA_PREC_DIV -D__CUDA_PREC_SQRT -I/opt/kernelgen/include -include kernelgen_runtime.h -x c -TARG:compute_20 -m64 -OPT:ftz=0 -CG:ftz=0 -CG:prec_div=1 -CG:prec_sqrt=1 /tmp/xJA1KS -o /tmp/CIEctp
nvopencc WARNING: /tmp/CIEctp /tmp/CIEctp will overwrite a file that has a source-file suffix
ptxas -v -arch=sm_20 -m64 /tmp/CIEctp -o /tmp/u247SW
ptxas info    : Compiling entry function '__kernelgen_sincos__loop_21' for 'sm_20'
ptxas info    : Function properties for __kernelgen_sincos__loop_21
    0 bytes stack frame, 0 bytes spill stores, 0 bytes spill loads
ptxas info    : Used 18 registers, 40 bytes cmem[0], 32 bytes cmem[14]
regcount = 18, size = 2784
Loaded '__kernelgen_sincos__loop_21' at: 0x25b5a20
Launching kernel __kernelgen_sincos__loop_21
    blockDim = { 1, 1, 1 }
    gridDim = { 1, 1, 1 }
__kernelgen_sincos__loop_21 time = 5.73941 sec
only the kernel execution time = 5.73932 sec
_gfortran_transfer_real_write time = 0.000273687 sec
 diff =              NaN
_gfortran_st_write_done time = 0.000146539 sec
Kernel __kernelgen_main has finished
terminate called after throwing an instance of 'int'
Aborted (core dumped)
[marcusmae@noisy malloc]$
